{"version":3,"sources":["file-drop-zone.directive.ts"],"names":[],"mappings":"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","file":"file-drop-zone.directive.js","sourcesContent":["import {Directive, EventEmitter, HostBinding, HostListener,\n        Input, OnInit, Output} from '@angular/core';\n\nimport {FileFilter, NullFileFilter} from './file-filter';\n\nfunction defaultCanDrop(event: DragEvent): boolean {\n  return Array.prototype.some.call(event.dataTransfer.items, function(item: DataTransferItem) {\n    return item.kind == 'file';\n  });\n}\n\n@Directive({\n  selector: '[fileDrop]'\n})\nexport class FileDropZoneDirective implements OnInit {\n  @Input(\"fileFilter\") filter: FileFilter;\n  @Input() canDrop: (event:DragEvent) => boolean;\n\n  @Output() fileUpload: EventEmitter<File[]> = new EventEmitter();\n  @Output() fileDragEnter: EventEmitter<DragEvent> = new EventEmitter();\n  @Output() fileDragExit: EventEmitter<DragEvent> = new EventEmitter();\n\n  @HostListener('drop', ['$event']) onDrop(event: DragEvent) {\n    let files = this.filter.filterFiles(Array.from(event.dataTransfer.files));\n    if (files.length > 0) {\n      this.fileUpload.emit(files);\n      this.dragging = false;\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  @HostListener('dragenter', ['$event']) onEnter(event: DragEvent) {\n    if (this.canDrop(event)) {\n      this.dragging = true;\n      this.fileDragEnter.emit(event);\n    }\n  }\n\n  @HostListener('dragleave', ['$event']) onExit(event: DragEvent) {\n    if (this.dragging) {\n      this.dragging = false;\n      this.fileDragExit.emit(event);\n    }\n  }\n\n  @HostListener('dragover', ['$event']) onOver(event: DragEvent) {\n    if (this.canDrop(event)) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n  }\n\n  @HostBinding('class.file-zone-dragging')\n  get draggingFile() {\n    return this.dragging;\n  }\n\n  ngOnInit() {\n    if (!this.filter) {\n      this.filter = new NullFileFilter();\n    }\n    if (!this.canDrop) {\n      this.canDrop = defaultCanDrop;\n    }\n  }\n\n  private dragging: boolean = false;\n}\n"],"sourceRoot":"/source/"}